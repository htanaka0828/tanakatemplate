window.TanakaTemplate=function(){function b(a){this.i.call(this,a)}b.prototype.i=function(a,c){this.a={type:"text/tanaka-template",j:null,target:null,e:"{{",d:"}}",b:!0};this.setOpt(c);a&&this.a.b&&this.run(a)};b.prototype.setOpt=function(a){a&&(a.type&&(this.a.type=a.type,a.target||(this.a.target=null)),a.template&&(this.a.c=a.template),a.target&&(this.a.target=a.target),a.befortag&&(this.a.e=a.befortag),a.aftertag&&(this.a.d=a.aftertag),a.runFlg&&(this.a.b=a.runFlg))};b.prototype.run=function(a){var c,
b;(c=this.f())&&c.innerText&&(b=this.h(c.innerText,a));b&&this.g(b)};b.prototype.f=function(){var a;a=this.a.c?this.a.c:document.querySelector?document.querySelector('script[type="'+this.a.type+'"]'):document.getElementsByTagName("script").find(function(a){return a.getAttribute("type")===this.a.type});"SCRIPT"!==a.tagName&&(a=null);return this.a.c=a};b.prototype.h=function(a,c){Object.keys(c).forEach(function(b){a=a.split(this.a.e+b+this.a.d).join(c[b])}.bind(this));a=a.replace(/\n/g,"");var b=document.createElement("div");
b.innerHTML=a;return b.childNodes[0]};b.prototype.g=function(a){if(this.a.b||this.a.target){var b;this.a.target?this.a.target.appendChild(a):(b=document.getElementsByTagName("script"),b=b[b.length-1],b.parentNode.insertBefore(a,b))}};return b}();